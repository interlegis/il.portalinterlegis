<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    css:if-content="#visual-portal-wrapper">

    <!-- THEME SELECTION -->
    <theme href="box_form.html" css:if-content="#box-preview" /> <!-- #### TODO #### rever -->
    <theme href="index.html" />

    <!-- HTML, HEAD & BODY -->
    <before css:theme-children="head" css:content-children="head" />
    <copy attributes="*" css:theme="html" css:content="html" />
    <copy attributes="*" css:theme="body" css:content="body" />
    <drop css:theme="#head-link-bootstrap" />

    <!-- HEADER -->
    <replace css:theme-children="#portal-header-wrapper" css:content-children="#portal-header-wrapper" />
    <!-- personaltools -->
    <drop css:content="#portal-personaltools-wrapper" />
    <replace css:theme-children="#portal-personaltools-wrapper" css:content-children="#portal-personaltools-wrapper" />
    <xsl:template match="//a[@id='user-name']/@class">
        <xsl:attribute name="class">dropdown-toggle</xsl:attribute>
    </xsl:template>
    <xsl:template match="//a[@id='personaltools-login']/@class">
        <xsl:attribute name="class">dropdown-toggle</xsl:attribute>
    </xsl:template>
    <!-- logo -->
    <xsl:template match="//a[@id='portal-logo']/img/@src">
        <xsl:attribute name="src">/++theme++il.portalinterlegis/images/logo.png</xsl:attribute>
    </xsl:template>
    <drop attributes="width" css:content="#portal-logo img" />
    <drop attributes="height" css:content="#portal-logo img" />

    <!-- SEARCH -->
    <replace css:theme="form.form-search" css:content="form.form-search" />
    <drop css:content="form.form-search .searchSection" />
    <xsl:template match="//input[@id='searchGadget']/@placeholder">
        <xsl:attribute name="placeholder">O que vocÃª procura?</xsl:attribute>
    </xsl:template>
    <drop attributes="class" css:content="#searchGadget" />
    <drop attributes="class" css:content=".LSBox button" />

    <!-- MAIN MENU -->
    <before css:theme-children="#portal-globalnav" css:content-children="#portal-globalnav" />

    <!-- CONTENT -->
    <replace css:theme-children="#portal-columns" css:content-children="#portal-columns"/>

    <!-- FOOTER -->
    <replace css:theme="#portal-siteactions" css:content="#portal-siteactions" />

    <!-- KSS -->
    <append theme="/html/body" content="//*[@id='kss-spinner']" />
    <append theme="/html/body" content="/html/body/div/div/div/script" />

</rules>
